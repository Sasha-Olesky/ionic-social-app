angular.module('starter.pletter', [])
.controller('PletterCtrl', function($scope, $state, $window, $ionicNavBarDelegate){
	$scope.$on('$ionicView.beforeEnter', function() {		
		$scope.$emit('child', true);
		$ionicNavBarDelegate.showBackButton(false);
	});	
	$scope.max_list_height = ($window.innerHeight - 140) + 'px';
    $scope.received_items = [
        {userid:'1',photo:'img/account/follow_photo1.jpg',name:'珊珊', message:'你爱看电影不，我们一起看电影吧！',time:'12:30'},
        {userid:'2',photo:'img/account/follow_photo2.jpg',name:'GXY', message:'我发其他照片给你吧，你有微信吗？',time:'13:30'},
        {userid:'3',photo:'img/account/follow_photo3.jpg',name:'clear',message:'应该可以吧。',time:'14:30'},
        {userid:'4',photo:'img/account/follow_photo4.jpg',name:'下雨了', message:'这是秘密。',time:'14:40'},
        {userid:'5',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'不告诉你。',time:'14:45'},
        {userid:'6',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'微信聊吧，合适就见面吧',time:'15:30'},
        {userid:'7',photo:'img/account/follow_photo6.jpg',name:'QQWE', message:"很无聊",time:'15:50'}
    ];

    $scope.sent_items = [
        {userid:'1',photo:'img/account/follow_photo1.jpg',name:'珊珊', message:'你爱看电影不，我们一起看电影吧！',time:'12:30'},
        {userid:'2',photo:'img/account/follow_photo2.jpg',name:'GXY', message:'我发其他照片给你吧，你有微信吗？',time:'13:30'},
        {userid:'3',photo:'img/account/follow_photo3.jpg',name:'clear',message:'应该可以吧。',time:'14:30'},
        {userid:'4',photo:'img/account/follow_photo4.jpg',name:'下雨了', message:'这是秘密。',time:'14:40'},
        {userid:'5',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'不告诉你。',time:'14:45'},
        {userid:'6',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'微信聊吧，合适就见面吧',time:'15:30'},
        {userid:'7',photo:'img/account/follow_photo6.jpg',name:'QQWE', message:"很无聊",time:'15:50'}
    ];

    $scope.chatWith = function(userid){
        $state.go('chatwith',{'userid':userid});
    }
})
.controller('chatCtrl', function($scope,$state){
	$scope.$on('$ionicView.beforeEnter', function() {
		$scope.$emit('child', true);		
	});
	
    $scope.received_items = [
        {userid:'1',photo:'img/account/follow_photo1.jpg',name:'珊珊', message:'你爱看电影不，我们一起看电影吧！',time:'12:30'},
        {userid:'2',photo:'img/account/follow_photo2.jpg',name:'GXY', message:'我发其他照片给你吧，你有微信吗？',time:'13:30'},
        {userid:'3',photo:'img/account/follow_photo3.jpg',name:'clear',message:'应该可以吧。',time:'14:30'},
        {userid:'4',photo:'img/account/follow_photo4.jpg',name:'下雨了', message:'这是秘密。',time:'14:40'},
        {userid:'5',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'不告诉你。',time:'14:45'},
        {userid:'6',photo:'img/account/follow_photo5.jpg',name:'小清新', message:'微信聊吧，合适就见面吧',time:'15:30'},
        {userid:'7',photo:'img/account/follow_photo6.jpg',name:'QQWE', message:"很无聊",time:'15:50'}
    ];
    $scope.curItem = $scope.received_items[0];
    $scope.$on('$ionicView.beforeEnter', function() {
        $scope.curItem = $scope.received_items[$state.params.userid];

    });
    $scope.navBack = function(){
        $state.go('tab.letter');
    }
});